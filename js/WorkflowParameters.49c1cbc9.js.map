{"version":3,"sources":["webpack:///./galaxy/src/workflows/WorkflowParameters.vue?919b","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./galaxy/src/workflows/WorkflowParameters.vue?3022","webpack:///galaxy/src/workflows/WorkflowParameters.vue","webpack:///./galaxy/src/workflows/WorkflowParameters.vue?f08b","webpack:///./galaxy/src/workflows/WorkflowParameters.vue?4ff9"],"names":["$","aFunction","toObject","fails","sloppyArrayMethod","test","nativeSort","sort","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","SLOPPY_METHOD","FORCED","target","proto","forced","comparefn","call","this","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_t","_l","input","index","key","_b","ref","refInFor","class","label","replace","history","on","onInput","directives","name","rawName","value","_uid","expression","_v","workflow","step","_s","tool_id","_e","workflow_inputs","length","staticRenderFns","component"],"mappings":"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","file":"js/WorkflowParameters.49c1cbc9.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowParameters.vue?vue&type=style&index=0&id=8c68f156&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowParameters.vue?vue&type=style&index=0&id=8c68f156&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar SLOPPY_METHOD = sloppyArrayMethod('sort');\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || SLOPPY_METHOD;\n\n// `Array.prototype.sort` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? nativeSort.call(toObject(this))\n      : nativeSort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{staticClass:\"galaxy-workflow-parameters\"},[_c('b-row',{attrs:{\"no-gutters\":\"\"}},[_vm._t(\"before\",null,null,this)],2),_vm._l((_vm.workflow_inputs),function(input,index){return _c('b-row',{key:index,attrs:{\"no-gutters\":\"\"}},[_c('WorkflowParameter',_vm._b({ref:\"params\",refInFor:true,class:input.label.replace(' ', '-'),attrs:{\"history\":_vm.history,\"no-body\":\"\"},on:{\"input\":_vm.onInput}},'WorkflowParameter',input,false))],1)}),(_vm.workflow)?_c('b-row',{staticClass:\"galaxy-workflow-parameters-steps\",attrs:{\"no-gutters\":\"\"}},[_c('b-card',{attrs:{\"no-body\":\"\"}},[_c('b-card-header',{attrs:{\"header-tag\":\"header\",\"role\":\"tab\"}},[_c('b-button',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle\",value:((_vm._uid + \"-step-parameters\")),expression:\"`${_uid}-step-parameters`\"}],attrs:{\"block\":\"\",\"href\":\"#\",\"variant\":\"info\"}},[_vm._v(\"Step Parameters\")])],1),_c('b-collapse',{attrs:{\"id\":(_vm._uid + \"-step-parameters\")}},_vm._l((_vm.workflow.steps),function(step,index){return _c('b-card',{key:index},[_c('b-card-header',{attrs:{\"header-tag\":\"header\"}},[_vm._v(_vm._s(step.tool_id))])],1)}),1)],1)],1):_vm._e(),(_vm.workflow_inputs.length === 0)?_c('div',{staticClass:\"text-center loading-spinner\"},[_c('b-spinner',{staticClass:\"align-middle\"}),_c('strong',[_vm._v(\"Loading...\")])],1):_vm._e(),_c('b-row',[_vm._t(\"after\",null,null,this)],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-container class=\"galaxy-workflow-parameters\">\n        <b-row no-gutters>\n            <slot name=\"before\" v-bind=\"this\"></slot>\n        </b-row>\n\n        <!-- Workflow inputs -->\n        <b-row v-for=\"(input, index) of workflow_inputs\"\n               v-bind:key=\"index\"\n               no-gutters\n        >\n            <WorkflowParameter v-bind=\"input\"\n                               v-bind:history=\"history\"\n                               @input=\"onInput\"\n                               no-body\n                               ref=\"params\"\n                               v-bind:class=\"input.label.replace(' ', '-')\"\n            />\n        </b-row>\n\n        <!-- Workflow Steps -->\n        <b-row no-gutters class=\"galaxy-workflow-parameters-steps\" v-if=\"workflow\">\n            <b-card no-body>\n                <b-card-header header-tag=\"header\" role=\"tab\">\n                    <b-button block href=\"#\" v-b-toggle=\"`${_uid}-step-parameters`\" variant=\"info\">Step Parameters</b-button>\n                </b-card-header>\n                <b-collapse v-bind:id=\"`${_uid}-step-parameters`\">\n                    <!-- Step parameters -->\n                    <b-card v-for=\"(step, index) of workflow.steps\" v-bind:key=\"index\">\n                        <!-- TODO need to load tool info to get name and load stored workflow -->\n                        <b-card-header header-tag=\"header\">{{step.tool_id}}</b-card-header>\n                        <!-- TODO move this out to a tool view -->\n                        <!--WorkflowParameter v-for=\"[label, input] of step.tool_inputs\" v-bind:key=\"label\" /-->\n                    </b-card>\n                </b-collapse>\n            </b-card>\n        </b-row>\n\n        <!-- Loading Spinner -->\n        <div v-if=\"workflow_inputs.length === 0\" class=\"text-center loading-spinner\">\n            <b-spinner class=\"align-middle\"></b-spinner>\n            <strong>Loading...</strong>\n        </div>\n\n        <b-row>\n            <slot name=\"after\" v-bind=\"this\"></slot>\n        </b-row>\n    </b-container>\n</template>\n\n<script>\n    import {History} from \"../api/histories\";\n    import {StoredWorkflow} from \"../api/workflows\";\n\n    export default {\n        name: \"WorkflowParameters\",\n        components: {WorkflowParameter: ()=>import(\"./WorkflowParameter\")},\n        props: {\n            workflow: {\n                validator(prop) {return prop instanceof StoredWorkflow || prop === null},\n                required: true,\n            },\n            history: {\n                validator(prop) {return prop instanceof History || prop === null},\n                required: true,\n            },\n        },\n        data() {return {\n            inputs: {},\n        }},\n        computed: {\n            workflow_inputs() {\n                let inputs = [];\n                if (!this.workflow) return inputs;\n                for (const [index, input] of Object.entries(this.workflow.inputs)) {\n                    const param = {index: index, uuid: input.uuid, label: input.label, type: this.workflow.steps[index].type, annotation: this.workflow.steps[index].annotation, order: 0};\n                    Object.assign(param, this.workflow.steps[index].tool_inputs);\n                    if (this.workflow.steps[index].annotation) {\n                        // TODO Temporary until https://github.com/galaxyproject/galaxy/issues/10895\n                        try {\n                            // Unescape entities\n                            const txt = document.createElement(\"textarea\");\n                            txt.innerHTML = param.annotation;\n                            const annotation = txt.value;\n                            const overrides = JSON.parse(annotation);\n                            // annotation included json, but not necessarily an annotation value. Do not show json.\n                            param.annotation = '';\n                            Object.assign(param, overrides);\n                        } catch (e) {\n                            if (!(e instanceof SyntaxError)) throw e;\n                        }\n                    }\n\n                    if (param.default) param.value = param.default; // Handle default value of simple inputs\n                    inputs.push(param);\n                }\n                inputs = inputs.sort((a,b)=>(a.order || 0) - (b.order || 0)).map(input=>{\n                    if (input.validator) input.validator = new Function('selection', 'return ' + input.validator); // TODO collection inputs really need a validator criteria\n                    return input;\n                });\n                return inputs;\n            },\n        },\n        methods: {\n            annotation(index) {\n                if (this.workflow && this.workflow.steps)\n                    return this.workflow.steps[index].annotation || '';\n                return '';\n            },\n            onInput(value) {\n                if (!this.workflow) throw(\"Workflow not ready\");\n                for (const [index, input] of Object.entries(value)) {\n                    if (input === null) {\n                        delete this.inputs[index];\n                    } else {\n                        this.inputs[index] = input;\n                    }\n                }\n\n                //Object.assign(this.inputs, value);\n                this.$emit('input', this.inputs);\n            },\n            checkValidity() {\n                /* Returns a Boolean that is false if the element is a candidate for constraint validation,\n                and it does not satisfy its constraints. In this case, it also fires an invalid event at the element.\n                It returns true if the element is not a candidate for constraint validation, or if it satisfies\n                its constraints.\n                 */\n                return this.$refs.params.every(param=>param.checkValidity());\n            },\n            reportValidity() {\n                /* Runs the checkValidity() method, and if it returns false (for an invalid input or no pattern\n                attribute provided), then it reports to the user that the input is invalid in the same manner\n                as if you submitted a form.\n                 */\n                return this.$refs.params.every(param=>param.reportValidity());\n            },\n            reset() {\n                /* Reset all parameters to their default state */\n                this.$refs.params.forEach(param=>param.reset());\n            }\n        },\n    }\n</script>\n\n<style scoped>\n    .row:empty {\n        display: none; /* Hide empty slots */\n    }\n\n    >>> .galaxy-history-contents-list {\n        min-height: 10rem;\n    }\n\n    .loading-spinner {\n        margin: 1em;\n    }\n\n    .loading-spinner strong {\n        padding-left: 1em;\n    }\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowParameters.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowParameters.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorkflowParameters.vue?vue&type=template&id=8c68f156&scoped=true&\"\nimport script from \"./WorkflowParameters.vue?vue&type=script&lang=js&\"\nexport * from \"./WorkflowParameters.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WorkflowParameters.vue?vue&type=style&index=0&id=8c68f156&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8c68f156\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}