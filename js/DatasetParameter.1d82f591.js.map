{"version":3,"sources":["webpack:///./galaxy/src/workflows/WorkflowParameterBase.vue?fb86","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./galaxy/src/workflows/WorkflowParameterBase.vue?69c8","webpack:///galaxy/src/workflows/WorkflowParameterBase.vue","webpack:///./galaxy/src/workflows/WorkflowParameterBase.vue?3921","webpack:///./galaxy/src/workflows/WorkflowParameterBase.vue?3d0c","webpack:///./galaxy/src/workflows/WorkFlowParameters/DatasetParameter.vue?7833","webpack:///galaxy/src/workflows/WorkFlowParameters/DatasetParameter.vue","webpack:///./galaxy/src/workflows/WorkFlowParameters/DatasetParameter.vue?011c","webpack:///./galaxy/src/workflows/WorkFlowParameters/DatasetParameter.vue"],"names":["$","aFunction","toObject","fails","sloppyArrayMethod","test","nativeSort","sort","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","SLOPPY_METHOD","FORCED","target","proto","forced","comparefn","call","this","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","validation_message","on","toggleCollapsed","_v","_s","label","optional","collapsed","_e","_t","annotation","staticRenderFns","component","this$1","_b","Object","assign","$attrs","$props","ref","history","value","datasetFilter","format","onInput","upload","$emit"],"mappings":"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","file":"js/DatasetParameter.1d82f591.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowParameterBase.vue?vue&type=style&index=0&id=138fbff7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowParameterBase.vue?vue&type=style&index=0&id=138fbff7&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar SLOPPY_METHOD = sloppyArrayMethod('sort');\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || SLOPPY_METHOD;\n\n// `Array.prototype.sort` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? nativeSort.call(toObject(this))\n      : nativeSort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-card',{staticClass:\"galaxy-workflow-parameter\",attrs:{\"border-variant\":_vm.validation_message ? 'danger' : 'default'}},[_c('b-card-header',{on:{\"click\":_vm.toggleCollapsed}},[_c('div',[_vm._v(_vm._s(_vm.label+(_vm.optional?' (Optional)': '')))]),(_vm.optional && _vm.collapsed)?_c('div',{staticClass:\"galaxy-workflow-parameter-collapse\"},[_vm._v(\"Show \"),_c('i',{staticClass:\"icon icon-uncollapse\"})]):_vm._e(),(_vm.optional && !_vm.collapsed)?_c('div',{staticClass:\"galaxy-workflow-parameter-collapse\"},[_vm._v(\"Hide \"),_c('i',{staticClass:\"icon icon-collapse\"})]):_vm._e()]),_c('b-card-body',{attrs:{\"body-class\":_vm.collapsed?'collapsed':''}},[_vm._t(\"default\")],2),(_vm.validation_message)?_c('b-card-footer',{attrs:{\"footer-text-variant\":\"danger\"}},[_c('em',[_vm._v(_vm._s(_vm.validation_message))])]):_c('b-card-footer',[_vm._v(\" \"+_vm._s(_vm.annotation)+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-card class=\"galaxy-workflow-parameter\" v-bind:border-variant=\"validation_message ? 'danger' : 'default'\">\n        <b-card-header @click=\"toggleCollapsed\">\n            <div>{{ label+(optional?' (Optional)': '') }}</div>\n            <div v-if=\"optional && collapsed\" class=\"galaxy-workflow-parameter-collapse\">Show <i class=\"icon icon-uncollapse\"></i></div>\n            <div v-if=\"optional && !collapsed\" class=\"galaxy-workflow-parameter-collapse\">Hide  <i class=\"icon icon-collapse\"></i></div>\n        </b-card-header>\n        <b-card-body :body-class=\"collapsed?'collapsed':''\">\n            <slot />\n        </b-card-body>\n        <b-card-footer v-if=\"validation_message\" footer-text-variant=\"danger\">\n            <em>{{validation_message}}</em>\n        </b-card-footer>\n        <b-card-footer v-else>\n            {{ annotation }}\n        </b-card-footer>\n    </b-card>\n</template>\n\n<script>\n    export default {\n        name: \"WorkflowParameterBase\",\n        props: {\n            /**\n             * Input label\n             */\n            label: {\n                type: String,\n                required: true,\n            },\n\n            /**\n             * Input annotation\n             */\n            annotation: {\n                type: String,\n                default: '',\n            },\n\n            /**\n             * User input optional\n             */\n            optional: {\n                type: Boolean,\n                default: false,\n            },\n\n            /**\n             * Hide body by default\n             */\n            collapse: {\n                type: Boolean,\n                default: false,\n            },\n\n            validation_message: {\n                type: String,\n                default: '',\n            }\n        },\n        data() {return {\n            collapsed: this.collapse,\n        }},\n        methods: {\n            toggleCollapsed() {\n                if (this.optional) this.collapsed = !this.collapsed;\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .card-header {\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n    }\n\n    .card-header > a:last-child {\n        text-decoration: none;\n    }\n\n    .collapsed {\n        display: none;\n    }\n</style>","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowParameterBase.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowParameterBase.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorkflowParameterBase.vue?vue&type=template&id=138fbff7&scoped=true&\"\nimport script from \"./WorkflowParameterBase.vue?vue&type=script&lang=js&\"\nexport * from \"./WorkflowParameterBase.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WorkflowParameterBase.vue?vue&type=style&index=0&id=138fbff7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"138fbff7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('WorkflowParameterBase',_vm._b({staticClass:\"galaxy-workflow-parameter-dataset\",attrs:{\"validation_message\":_vm.validation_message}},'WorkflowParameterBase',Object.assign({}, _vm.$attrs, _vm.$props),false),[_c('HistoryContents',{ref:\"history_contents\",attrs:{\"history\":_vm.history,\"value\":_vm.value,\"filter\":_vm.datasetFilter,\"accepted_upload_types\":_vm.format,\"selectable\":true},on:{\"input\":_vm.onInput,\"upload\":function (upload){ return this$1.$emit('upload', upload); }}}),(_vm.mapped)?_c('span',[_c('i',{staticClass:\"icon-batch-mode\"}),_vm._v(\" This input expects a single selection. Separate jobs will be triggered for each dataset selection. \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <WorkflowParameterBase class=\"galaxy-workflow-parameter-dataset\" v-bind=\"{...$attrs, ...$props}\" :validation_message=\"validation_message\">\n        <HistoryContents ref=\"history_contents\"\n                         :history=\"history\"\n                         :value=\"value\"\n                         :filter=\"datasetFilter\"\n                         :accepted_upload_types=\"format\"\n                         :selectable=\"true\"\n                         @input=\"onInput\"\n                         @upload=\"upload=>this.$emit('upload', upload)\"\n        />\n        <span v-if=\"mapped\">\n            <i class=\"icon-batch-mode\"></i>\n            This input expects a single selection. Separate jobs will be triggered for each dataset selection.\n        </span>\n    </WorkflowParameterBase>\n</template>\n\n<script>\n    import HistoryContents from \"../../histories/HistoryContents\";\n    import WorkflowParameterBase from \"../WorkflowParameterBase\";\n    import {History} from \"../../api/histories\";\n\n    /**\n     * Workflow dataset/collection parameter\n     * Allows user to select one or more datasets or collections for a workflow input\n     */\n    export default {\n        name: \"DatasetParameter\",\n        components: {WorkflowParameterBase, HistoryContents },\n        props: {\n            /**\n             * Input type as returned by the api\n             */\n            type: {\n                type: String,\n                required: true,\n            },\n\n            /**\n             * Input label\n             */\n            label: {\n                type: String,\n                required: true,\n            },\n\n            /**\n             * Input annotation\n             */\n            annotation: {\n                type: String,\n                default: '',\n            },\n\n            /**\n             * History model\n             */\n            history: {\n                validator(prop) {return prop instanceof History || prop === null},\n                required: true,\n            },\n\n            /**\n             * The initial value, allows component to work with v-model\n             */\n            value: {\n                type: Array,\n                default(){return []},\n            },\n\n            /**\n             * List of accepted file extensions\n             */\n            format: {\n                type: Array,\n                default() { return [] },\n            },\n\n            /**\n             *\n             */\n            optional: {\n                type: Boolean,\n                default: false,\n            },\n\n            /**\n             * User input validator callback\n             * Callback receives list of selected datasets, must return an empty string if valid or a validation message if not.\n             */\n            validator: {\n                type: Function,\n                default(selection) {\n                    return selection ? '' : 'Please select at least one dataset';\n                }\n            }\n        },\n        data() {return{\n            selection: null,\n            selected_models: [],\n            validation_message: '',\n        }},\n        computed: {\n            mapped() {\n                return this.type === 'data_input' && this.selection && this.selection.src === 'new_collection';\n            },\n        },\n        methods: {\n            datasetFilter(item) {\n                // Check name for valid extension while Galaxy is sniffing the file type\n                let ext = item.name.match(/[^.]+$/);\n                ext = ext ? ext[0] : '';\n                return this.format.includes(item.extension)\n                    || (item.extension === '' && this.format.includes(ext))\n                    || (item.extension === 'auto' && this.format.includes(ext))\n                    || (item.extension === 'data' && this.format.includes(ext));\n            },\n            onInput(models) {\n                this.selected_models = models;\n                if (models.length === 0) {\n                    this.selection = null;\n                } else if (this.type === 'data_collection_input' || models.length > 1) {\n                    this.selection = {\n                        src: 'new_collection',\n                        collection_type: 'list',\n                        name: this.label,\n                        element_identifiers: models.reduce((acc, model) => {\n                            // Convert model to input object\n                            let result = model.toInput();\n\n                            // Ensure name is unique\n                            let name = model.name;\n                            let suff = 1;\n                            while (acc.some(i=>i.name === name)) {\n                                name = model.name + '_' + suff.toString();\n                                ++suff;\n                            }\n                            result.name = name;\n\n                            acc.push(result);\n                            return acc;\n                        }, []),\n                    };\n                } else {\n                    this.selection = models[0].toInput();\n                }\n\n                let message = this.selection;\n                this.$emit('input', message);\n            },\n            setCustomValidity(message){\n                /* Sets a custom validity message for the element. If this message is not the empty string,\n                then the element is suffering from a custom validity error, and does not validate.\n                 */\n                this.validation_message = message;\n            },\n            checkValidity() {\n                for (const model of this.selected_models) {\n                    if (!model.ready()) return false;\n                }\n                if (this.optional && !this.selection) return true;\n                return this.validator(this.selection) === '' && this.validation_message === '';\n            },\n            reportValidity() {\n                for (const model of this.selected_models) {\n                    if (!model.ready()) {\n                        this.validation_message = \"Some selected datasets are not ready for analysis. Please wait or make a different selection.\";\n                        return false;\n                    }\n                }\n                if (this.optional && !this.selection) return true;\n                this.validation_message = this.validator(this.selected_models);\n                return this.validation_message === '';\n            },\n            reset() {\n                this.$refs.history_contents.clearSelected();\n            },\n        },\n    }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatasetParameter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatasetParameter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DatasetParameter.vue?vue&type=template&id=65b157c0&scoped=true&\"\nimport script from \"./DatasetParameter.vue?vue&type=script&lang=js&\"\nexport * from \"./DatasetParameter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"65b157c0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}